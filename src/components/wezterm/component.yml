name: wezterm
description: GPU-accelerated cross-platform terminal emulator
platforms:
  macos:
    installMethod: package
    packageManager: brew-cask
    packageName: wezterm
    postInstall: |
      if [[ -f "${DOTFILES_ROOT}/src/core/fs.sh" ]]; then
        source "${DOTFILES_ROOT}/src/core/fs.sh"
      fi

      CONFIG_SOURCE="${DOTFILES_ROOT}/src/configs/.config/wezterm"
      if [[ -d "$CONFIG_SOURCE" ]]; then
        fs_symlink "$CONFIG_SOURCE" "$HOME/.config/wezterm" "wezterm"
        log_success "WezTerm configuration linked"
      else
        log_warn "WezTerm config directory not found: $CONFIG_SOURCE"
      fi

  ubuntu:
    installMethod: package
    packageManager: apt
    packageName: wezterm
    postInstall: |
      if [[ -f "${DOTFILES_ROOT}/src/core/fs.sh" ]]; then
        source "${DOTFILES_ROOT}/src/core/fs.sh"
      fi

      CONFIG_SOURCE="${DOTFILES_ROOT}/src/configs/.config/wezterm"
      if [[ -d "$CONFIG_SOURCE" ]]; then
        fs_symlink "$CONFIG_SOURCE" "$HOME/.config/wezterm" "wezterm"
        log_success "WezTerm configuration linked"
      fi

  debian:
    installMethod: package
    packageManager: apt
    packageName: wezterm
    postInstall: |
      if [[ -f "${DOTFILES_ROOT}/src/core/fs.sh" ]]; then
        source "${DOTFILES_ROOT}/src/core/fs.sh"
      fi

      CONFIG_SOURCE="${DOTFILES_ROOT}/src/configs/.config/wezterm"
      if [[ -d "$CONFIG_SOURCE" ]]; then
        fs_symlink "$CONFIG_SOURCE" "$HOME/.config/wezterm" "wezterm"
        log_success "WezTerm configuration linked"
      fi

  fedora:
    installMethod: package
    packageManager: dnf
    packageName: wezterm
    postInstall: |
      if [[ -f "${DOTFILES_ROOT}/src/core/fs.sh" ]]; then
        source "${DOTFILES_ROOT}/src/core/fs.sh"
      fi

      CONFIG_SOURCE="${DOTFILES_ROOT}/src/configs/.config/wezterm"
      if [[ -d "$CONFIG_SOURCE" ]]; then
        fs_symlink "$CONFIG_SOURCE" "$HOME/.config/wezterm" "wezterm"
        log_success "WezTerm configuration linked"
      fi

  rhel:
    installMethod: package
    packageManager: dnf
    packageName: wezterm
    postInstall: |
      if [[ -f "${DOTFILES_ROOT}/src/core/fs.sh" ]]; then
        source "${DOTFILES_ROOT}/src/core/fs.sh"
      fi
      CONFIG_SOURCE="${DOTFILES_ROOT}/src/configs/.config/wezterm"
      if [[ -d "$CONFIG_SOURCE" ]]; then
        fs_symlink "$CONFIG_SOURCE" "$HOME/.config/wezterm" "wezterm"
        log_success "WezTerm configuration linked"
      fi

  centos:
    installMethod: package
    packageManager: dnf
    packageName: wezterm
    postInstall: |
      if [[ -f "${DOTFILES_ROOT}/src/core/fs.sh" ]]; then
        source "${DOTFILES_ROOT}/src/core/fs.sh"
      fi
      CONFIG_SOURCE="${DOTFILES_ROOT}/src/configs/.config/wezterm"
      if [[ -d "$CONFIG_SOURCE" ]]; then
        fs_symlink "$CONFIG_SOURCE" "$HOME/.config/wezterm" "wezterm"
        log_success "WezTerm configuration linked"
      fi

  arch:
    installMethod: package
    packageManager: pacman
    packageName: wezterm
    postInstall: |
      if [[ -f "${DOTFILES_ROOT}/src/core/fs.sh" ]]; then
        source "${DOTFILES_ROOT}/src/core/fs.sh"
      fi
      CONFIG_SOURCE="${DOTFILES_ROOT}/src/configs/.config/wezterm"
      if [[ -d "$CONFIG_SOURCE" ]]; then
        fs_symlink "$CONFIG_SOURCE" "$HOME/.config/wezterm" "wezterm"
        log_success "WezTerm configuration linked"
      fi

  opensuse:
    installMethod: package
    packageManager: zypper
    packageName: wezterm
    postInstall: |
      if [[ -f "${DOTFILES_ROOT}/src/core/fs.sh" ]]; then
        source "${DOTFILES_ROOT}/src/core/fs.sh"
      fi
      CONFIG_SOURCE="${DOTFILES_ROOT}/src/configs/.config/wezterm"
      if [[ -d "$CONFIG_SOURCE" ]]; then
        fs_symlink "$CONFIG_SOURCE" "$HOME/.config/wezterm" "wezterm"
        log_success "WezTerm configuration linked"
      fi

  alpine:
    installMethod: package
    packageManager: apk
    packageName: wezterm
    postInstall: |
      if [[ -f "${DOTFILES_ROOT}/src/core/fs.sh" ]]; then
        source "${DOTFILES_ROOT}/src/core/fs.sh"
      fi
      CONFIG_SOURCE="${DOTFILES_ROOT}/src/configs/.config/wezterm"
      if [[ -d "$CONFIG_SOURCE" ]]; then
        fs_symlink "$CONFIG_SOURCE" "$HOME/.config/wezterm" "wezterm"
        log_success "WezTerm configuration linked"
      fi

parallelSafe: true
critical: false
requires: [fonts]
provides: [terminal]
healthCheck: "wezterm ls-fonts >/dev/null 2>&1 || wezterm --version >/dev/null 2>&1"
tags: [terminal, productivity]
files:
  - ~/.config/wezterm/
